<!DOCTYPE html>
<html lang="en">
<head>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PDJVZZZ6');</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marketing Tools | John</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    
    <style>
        .social-nav-icon {
            color: #94A3B8; font-size: 1.2rem; margin-left: 20px; transition: color 0.3s ease;
        }
        .social-nav-icon:hover { color: #3B82F6; }
    </style>
</head>
<body>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PDJVZZZ6"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    <header>
        <div class="container">
            <nav>
                <a href="index.html" class="logo">John.Dev</a>
                <div class="nav-links" style="display: flex; align-items: center;">
                    <a href="index.html">About</a>
                    <a href="index.html#stack">Tech Stack</a>
                    <a href="tools.html" class="active" style="color: var(--primary);">Tools</a>
                    <a href="resources.html">Reading</a>
                    
                    <div style="border-left: 1px solid #334155; height: 24px; margin-left: 25px; margin-right: 5px;"></div>
                    
                    <a href="https://www.linkedin.com/in/giannis-zografakis-2965a0244/" target="_blank" class="social-nav-icon"><i class="fab fa-linkedin"></i></a>
                    <a href="https://www.instagram.com/gianniszwg/?hl=el" target="_blank" class="social-nav-icon"><i class="fab fa-instagram"></i></a>
                </div>
            </nav>
        </div>
    </header>

    <div class="container" style="padding-top: 120px; padding-bottom: 40px; text-align: center;">
        <h1>Marketing <span style="color: var(--primary);">Utility Belt</span></h1>
        <p style="color: var(--text-muted);">Automation tools to speed up daily workflows.</p>
    </div>

    <section class="section-padding" style="padding-top: 20px;">
        <div class="container">
            <div class="tool-wrapper">
                <div class="tool-header">
                    <span style="color: var(--primary); font-weight:bold; letter-spacing: 1px; font-size:0.8rem;">TRACKING</span>
                    <h2>UTM Campaign Builder</h2>
                    <p>Standardize your tracking parameters instantly.</p>
                </div>
                <form id="utmForm">
                    <div class="form-group full-width"><label>website URL *</label><input type="url" id="baseUrl" placeholder="https://www.example.com" required></div>
                    <div class="form-group full-width"><label>campaign ID</label><input type="text" id="utmId" placeholder="The ads campaign id."></div>
                    <div class="form-group full-width"><label>campaign source *</label><input type="text" id="utmSource" placeholder="google, newsletter" required></div>
                    <div class="form-group full-width"><label>campaign medium *</label><input type="text" id="utmMedium" placeholder="cpc, email" required></div>
                    <div class="form-group full-width"><label>campaign name *</label><input type="text" id="utmCampaign" placeholder="spring_sale" required></div>
                    <div class="form-group full-width"><label>campaign term</label><input type="text" id="utmTerm" placeholder="paid keywords"></div>
                    <div class="form-group full-width"><label>campaign content</label><input type="text" id="utmContent" placeholder="differentiate ads"></div>
                </form>
                <div class="result-box">
                    <div id="finalUrl" class="generated-url">Fill in the fields...</div>
                    <button class="copy-btn" onclick="copyToClipboard('finalUrl')"><i class="fas fa-copy"></i></button>
                </div>
            </div>
        </div>
    </section>

    <section class="section-padding" style="padding-top: 0;">
        <div class="container">
            <div class="tool-wrapper" style="border-color: #8B5CF6;">
                <div class="tool-header">
                    <span style="color: #8B5CF6; font-weight:bold; letter-spacing: 1px; font-size:0.8rem;">TECHNICAL</span>
                    <h2>GTM Data Layer Generator</h2>
                    <p>Generate valid JavaScript code for GA4 Ecommerce events.</p>
                </div>
                <div class="form-grid">
                    <div class="form-group"><label>Event Name</label><select id="eventName"><option value="purchase">Purchase</option><option value="add_to_cart">Add to Cart</option><option value="begin_checkout">Begin Checkout</option></select></div>
                    <div class="form-group"><label>Currency</label><input type="text" id="currency" value="EUR"></div>
                </div>
                <div class="form-grid">
                    <div class="form-group"><label>Transaction ID</label><input type="text" id="transactionId" placeholder="T_12345"></div>
                    <div class="form-group"><label>Total Value</label><input type="number" id="totalValue" placeholder="59.90"></div>
                </div>
                <div class="form-grid">
                    <div class="form-group"><label>Item ID / SKU</label><input type="text" id="itemId" placeholder="SKU_999"></div>
                    <div class="form-group"><label>Item Name</label><input type="text" id="itemName" placeholder="Blue T-Shirt"></div>
                </div>
                <div class="result-box" style="background: #1e1e1e; border-color: #333;">
                    <pre id="codeOutput" style="color: #A5B4FC; font-family: 'Consolas', monospace; white-space: pre-wrap;">// Code...</pre>
                    <button class="copy-btn" onclick="copyToClipboard('codeOutput')"><i class="fas fa-code"></i></button>
                </div>
            </div>
        </div>
    </section>

    <section class="section-padding" style="padding-top: 0;">
        <div class="container">
            <div class="tool-wrapper" style="border-color: #10B981;">
                <div class="tool-header">
                    <span style="color: #10B981; font-weight:bold; letter-spacing: 1px; font-size:0.8rem;">DATA SCIENCE</span>
                    <h2>A/B Test Significance Calc</h2>
                    <p>Check if your campaign results are statistically significant.</p>
                </div>

                <div class="form-grid">
                    <div style="background: #151921; padding: 20px; border-radius: 8px; border: 1px solid #334155;">
                        <h3 style="color: #94A3B8; font-size: 1rem; margin-bottom: 15px;">Version A (Control)</h3>
                        <div class="form-group" style="margin-bottom: 15px;">
                            <label>Visitors</label>
                            <input type="number" id="visitorsA" placeholder="e.g. 1000">
                        </div>
                        <div class="form-group">
                            <label>Conversions</label>
                            <input type="number" id="conversionsA" placeholder="e.g. 50">
                        </div>
                    </div>

                    <div style="background: #151921; padding: 20px; border-radius: 8px; border: 1px solid #334155;">
                        <h3 style="color: #94A3B8; font-size: 1rem; margin-bottom: 15px;">Version B (Variation)</h3>
                        <div class="form-group" style="margin-bottom: 15px;">
                            <label>Visitors</label>
                            <input type="number" id="visitorsB" placeholder="e.g. 1000">
                        </div>
                        <div class="form-group">
                            <label>Conversions</label>
                            <input type="number" id="conversionsB" placeholder="e.g. 65">
                        </div>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="calculateSignificance()" style="width: 100%; margin-top: 20px; background: #10B981;">Calculate Significance</button>

                <div class="result-box" id="abResultBox" style="display:none; text-align: center; border-color: #10B981;">
                    <h3 id="abResultTitle" style="color: #fff; margin-bottom: 10px;"></h3>
                    <p id="abResultDesc" style="color: #94A3B8;"></p>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p style="margin-bottom: 10px;">&copy; 2025 John. Built with custom code.</p>
            <div style="font-size: 0.85rem;">
                <a href="legal.html" style="color: var(--text-muted); text-decoration: none; margin: 0 10px;">Privacy & Terms</a>
            </div>
        </div>
    </footer>

    <script>
        // --- 1. UTM LOGIC ---
        const utmInputs = document.querySelectorAll('#utmForm input');
        const display = document.getElementById('finalUrl');
        function generateURL() {
            const urlVal = document.getElementById('baseUrl').value.trim();
            const source = document.getElementById('utmSource').value.trim();
            const medium = document.getElementById('utmMedium').value.trim();
            const campaign = document.getElementById('utmCampaign').value.trim();
            const id = document.getElementById('utmId').value.trim();
            const term = document.getElementById('utmTerm').value.trim();
            const content = document.getElementById('utmContent').value.trim();
            if (!urlVal) { display.textContent = 'Enter a valid Website URL...'; return; }
            try {
                let finalBase = urlVal; if (!/^https?:\/\//i.test(finalBase)) { finalBase = 'https://' + finalBase; }
                const urlObj = new URL(finalBase);
                if (source) urlObj.searchParams.set('utm_source', source);
                if (medium) urlObj.searchParams.set('utm_medium', medium);
                if (campaign) urlObj.searchParams.set('utm_campaign', campaign);
                if (id) urlObj.searchParams.set('utm_id', id);
                if (term) urlObj.searchParams.set('utm_term', term);
                if (content) urlObj.searchParams.set('utm_content', content);
                display.style.color = '#10B981'; display.textContent = urlObj.toString();
            } catch (e) { display.textContent = 'Invalid URL'; }
        }
        utmInputs.forEach(input => input.addEventListener('input', generateURL));

        // --- 2. GTM LOGIC ---
        const gtmInputs = document.querySelectorAll('#eventName, #currency, #transactionId, #totalValue, #itemId, #itemName');
        const codeDisplay = document.getElementById('codeOutput');
        function generateDataLayer() {
            const eventName = document.getElementById('eventName').value;
            const value = document.getElementById('totalValue').value || 0;
            const dlObject = {
                event: eventName,
                ecommerce: {
                    currency: document.getElementById('currency').value || 'EUR',
                    value: parseFloat(value),
                    transaction_id: document.getElementById('transactionId').value || 'T_12345',
                    items: [{ item_id: document.getElementById('itemId').value || 'SKU_123', item_name: document.getElementById('itemName').value || 'Product', price: parseFloat(value) }]
                }
            };
            if(eventName !== 'purchase') { delete dlObject.ecommerce.transaction_id; }
            codeDisplay.textContent = `window.dataLayer.push(${JSON.stringify(dlObject, null, 4)});`;
        }
        gtmInputs.forEach(input => input.addEventListener('input', generateDataLayer));
        window.addEventListener('load', generateDataLayer);

        // --- 3. A/B TEST LOGIC ---
        function calculateSignificance() {
            const visA = parseFloat(document.getElementById('visitorsA').value);
            const convA = parseFloat(document.getElementById('conversionsA').value);
            const visB = parseFloat(document.getElementById('visitorsB').value);
            const convB = parseFloat(document.getElementById('conversionsB').value);

            if(!visA || !convA || !visB || !convB) { alert("Please fill in all fields"); return; }

            const rateA = convA / visA;
            const rateB = convB / visB;
            const se = Math.sqrt(((rateA * (1 - rateA)) / visA) + ((rateB * (1 - rateB)) / visB));
            const zScore = (rateB - rateA) / se;
            
            // Simplified confidence approximation
            let confidence = 0;
            const z = Math.abs(zScore);
            if(z >= 2.58) confidence = 99;
            else if(z >= 1.96) confidence = 95;
            else if(z >= 1.65) confidence = 90;
            else confidence = Math.round((1 - (1/(1+z)))*100); // Rough estimate for lower values

            const resultBox = document.getElementById('abResultBox');
            const resultTitle = document.getElementById('abResultTitle');
            const resultDesc = document.getElementById('abResultDesc');
            
            resultBox.style.display = 'block';

            if (confidence >= 90) {
                const winner = rateB > rateA ? "Variation B" : "Version A";
                const lift = ((rateB - rateA) / rateA * 100).toFixed(2);
                resultTitle.textContent = `Significant Result! (${confidence}% Confidence)`;
                resultTitle.style.color = "#10B981";
                resultDesc.innerHTML = `The winner is <strong>${winner}</strong> with a ${lift}% lift in conversion rate.`;
            } else {
                resultTitle.textContent = "Test is Inconclusive";
                resultTitle.style.color = "#F59E0B";
                resultDesc.textContent = "There is not enough data yet to declare a winner with high confidence (Need at least 90%). Keep running the test.";
            }
        }

        function copyToClipboard(elementId) {
            const textToCopy = document.getElementById(elementId).textContent;
            navigator.clipboard.writeText(textToCopy).then(() => { alert("Copied!"); });
        }
    </script>
</body>
</html>
